<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="renderer.js" defer></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>Pokevent Data Tool</title>
</head>
<body>
   <nav class="nav-bar-2">
       <h1>Embed Preview</h1>
   </nav>

   <div class="card">
        <div class="card-header"></div>
        <div class="card-block preview">
            <div class="wrapper">
                <div class="side-colored" style="background-color: rgb(255, 173, 213);"></div>
                <div class="card embed">
                    <div class="card-block">
                        <div class="embed-inner">
                            <div class="embed-author">
                                <a class="embed-author-name" href>Pokevent</a>
                            </div>
                            <div class="embed-title" id="dynamicEmbedTitle"></div>
                            <div class="embed-description" id="dynamicEmbedDescription"></div>
                            <div class="fields">
                                <div class="field inline">
                                    <div class="field-name">Start Date</div>
                                    <div class="field-value" id="dynamicStartDate"></div>
                                </div>
                                <div class="field false">
                                    <div class="field-name">End Date</div>
                                    <div class="field-value" id="dynamicEndDate"></div>
                                </div>
                                <div class="field false">
                                    <div class="field-name">Start Time</div>
                                    <div class="field-value" id="dynamicStartTime"></div>
                                </div>
                            </div>
                        </div>
                        <img class="embed-thumb" src="https://leekduck.com/assets/img/events/cd-2024-02-chansey.jpg" style="height: 125px;">
                    </div>
                    <div class="embed-footer">
                        <span>(All Dates and times are local)</span>
                    </div>
                </div>
            </div>
        </div>
   </div>

   <form action="index.html">
    <button type="menu" class="preview-button">Go Back</button>
   </form>

   <script>
        const fs = require('fs').promises;
        fs.readFile('event_details.json', 'utf8')
            .then(data => {
                const eventDetails = JSON.parse(data);

                // Replace content inside the elements 
                document.getElementById('dynamicEmbedTitle').textContent = eventDetails.title;
                document.getElementById('dynamicEmbedDescription').textContent = eventDetails.description.join(' ');
                document.getElementById('dynamicStartDate').textContent = eventDetails.starting;
                document.getElementById('dynamicEndDate').textContent = eventDetails.ending;
                document.getElementById('dynamicStartTime').textContent = eventDetails.startingTime;
            })
            .catch(err => {
                console.error('Error reading event details: ', err);
            });
   </script>
</body>
</html>
